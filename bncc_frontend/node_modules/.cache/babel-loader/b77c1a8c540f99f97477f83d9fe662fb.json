{"ast":null,"code":"import _slicedToArray from \"/Users/ns/Code/bncc_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/ns/Code/bncc_frontend/src/containers/Preference/Sport/Sport.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Select, Spin, Button } from \"antd\";\nimport { connect } from \"react-redux\";\nimport styles from './Sport.module.css';\nimport axios from \"../../../axios\";\nimport * as actions from \"../../../store/actions/index\";\nconst Option = Select.Option;\n\nfunction Sport({\n  user,\n  onSubmit\n}) {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        data = _useState2[0],\n        setData = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        fetching = _useState4[0],\n        setFetching = _useState4[1];\n\n  const _useState5 = useState([]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        value = _useState6[0],\n        setValue = _useState6[1];\n\n  const fetchSports = value => {\n    setFetching(true);\n    const data = {\n      name: value\n    };\n    axios.post('/sport/search', data).then(res => {\n      setData(res.data.sports);\n      setFetching(false);\n    });\n  };\n\n  useEffect(() => {\n    fetchSports('');\n  }, []);\n\n  const submitHandler = async () => {\n    await value.forEach(async item => {\n      const data = {\n        userSportMapping: {\n          userId: user.id,\n          sportId: +item.key\n        }\n      };\n      await axios.post('/user/sport/mapping/upsert', data);\n    });\n    onSubmit();\n  };\n\n  const changeHandler = value => {\n    setValue(value);\n    setData([]);\n    setFetching(false);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: styles.form_item,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: styles.form_label,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"What Sports do you like ?\"), React.createElement(Select, {\n    mode: \"multiple\",\n    labelInValue: true,\n    value: value,\n    placeholder: \"Select Sports\",\n    notFoundContent: fetching ? React.createElement(Spin, {\n      size: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }) : null,\n    filterOption: false,\n    onSearch: fetchSports,\n    onChange: changeHandler,\n    style: {\n      width: \"100%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, data.map(d => React.createElement(Option, {\n    key: d.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, d.name))), React.createElement(\"div\", {\n    className: styles.container_margin,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(Button, {\n    type: \"primary\",\n    onClick: submitHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Submit\"))));\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.authReducer.user\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onSubmit: () => dispatch(actions.updateCurrPref())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sport);","map":{"version":3,"sources":["/Users/ns/Code/bncc_frontend/src/containers/Preference/Sport/Sport.js"],"names":["React","useState","useEffect","Select","Spin","Button","connect","styles","axios","actions","Option","Sport","user","onSubmit","data","setData","fetching","setFetching","value","setValue","fetchSports","name","post","then","res","sports","submitHandler","forEach","item","userSportMapping","userId","id","sportId","key","changeHandler","form_item","form_label","width","map","d","container_margin","mapStateToProps","state","authReducer","mapDispatchToProps","dispatch","updateCurrPref"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Select, Spin, Button } from \"antd\";\nimport { connect } from \"react-redux\";\nimport styles from './Sport.module.css';\nimport axios from \"../../../axios\";\nimport * as actions from \"../../../store/actions/index\";\n\nconst { Option } = Select;\n\nfunction Sport({ user, onSubmit }) {\n    const [data, setData] = useState([]);\n    const [fetching, setFetching] = useState(false);\n    const [value, setValue] = useState([]);\n\n    const fetchSports = value => {\n        setFetching(true);\n        const data = {\n            name: value\n        }\n\n        axios.post('/sport/search', data).then(res => {\n            setData(res.data.sports);\n            setFetching(false);\n        });\n    };\n\n    useEffect(() => {\n        fetchSports('');\n    }, []);\n\n    const submitHandler = async () => {\n        await value.forEach(async (item) => {\n            const data = {\n                userSportMapping: {\n                    userId: user.id,\n                    sportId: +item.key\n                }\n            }\n\n            await axios.post('/user/sport/mapping/upsert', data);\n        });\n\n        onSubmit();\n    }\n\n    const changeHandler = value => {\n        setValue(value);\n        setData([]);\n        setFetching(false);\n    };\n\n    return (\n        <>\n        <div className={styles.form_item}>\n            <div className={styles.form_label}>What Sports do you like ?</div>\n            <Select\n                mode=\"multiple\"\n                labelInValue\n                value={value}\n                placeholder=\"Select Sports\"\n                notFoundContent={fetching ? <Spin size=\"small\" /> : null}\n                filterOption={false}\n                onSearch={fetchSports}\n                onChange={changeHandler}\n                style={{ width: \"100%\" }}\n            >\n                {data.map(d => (\n                    <Option key={d.id}>{d.name}</Option>\n                ))}\n            </Select>\n            <div className={styles.container_margin}>\n                <Button type=\"primary\" onClick={submitHandler}>Submit</Button>\n            </div>\n        </div>    \n        </>\n    );\n}\n\nconst mapStateToProps = state => {\n    return {\n        user: state.authReducer.user\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onSubmit: () => dispatch(actions.updateCurrPref())\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sport);\n"]},"metadata":{},"sourceType":"module"}